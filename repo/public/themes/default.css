/* =============================
   A4 canvas that scales fluidly
   ============================= */
@page {
  size: A4 landscape;
  margin: 0;
}

/* Screen: fluid, keeps aspect ratio 297:210 */
.page {
  position: relative;
  width: 100%;
  max-width: 1125px;                /* optional desktop cap */
  aspect-ratio: 297 / 210;          /* keeps the A4 shape on any screen */
  background: #fff;
  margin: 0 auto 20px auto;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  scroll-snap-align: start;
  page-break-after: always;
  container-type: inline-size; /* now we can use cqw (container width %) */
}

/* Body scroll settings kept */
* { box-sizing: border-box; }
body {
  margin: 0;
  padding: 20px;
  background: #f5f5f5;
  font-family: sans-serif;
  scroll-behavior: smooth;
  overflow-x: auto;
  scroll-snap-type: y mandatory;
}

/* =============================
   FONT SCALING (proportional)
   Make text scale with page width, but clamp to stay readable
   ============================= */
:root {
  /* base that feels right across phone->desktop; tweak if needed */
  --fs-12pt: clamp(12px, 1.35vw, 16px);  /* ~12pt */
  --fs-14pt: clamp(14px, 1.6vw, 18px);   /* ~14pt */
}

/* =============================
   Convert all mm to % of page
   297mm => 100% width, 210mm => 100% height
   % values are rounded to 3 decimals
   ============================= */

/* Video box: 95 x 170 mm at (20, 20) mm */
.video-box {
  position: absolute;
  left: 6.734%;              /* 20 / 297 */
  top: 9.524%;               /* 20 / 210 */
  width: 31.987%;            /* 95 / 297 */
  height: 80.952%;           /* 170 / 210 */
  background: #eee;
  overflow: hidden;
}
.video-box video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Image label at (125, 57.762) mm */
.image-label {
  position: absolute;
  left: 42.088%;             /* 125 / 297 */
  top: 26%;                  /* 57.762 / 210 */
  font-size: clamp(9px, 1.659cqw, 24px);
  font-weight: bold;
  color: #333;
}

/* Orange label line: y = 57.762 + 6 = 63.762 mm, width 88.171 mm, height 0.176 mm */
.label-line {
  position: absolute;
  left: 42.088%;             /* 125 / 297 */
  top: 30.363%;              /* 63.762 / 210 */
  width: 29.687%;            /* 88.171 / 297 */
  height: 0.084%;            /* 0.176 / 210 */
  background-color: #d46a1e;
}

/* Main image: 88.171 x 88.171 mm at (125, 70) mm */
.image-box {
  position: absolute;
  left: 42.088%;             /* 125 / 297 */
  top: 33.333%;              /* 70 / 210 */
  width: 29.687%;            /* 88.171 / 297 */
  height: 41.986%;           /* 88.171 / 210 */
  background-color: #ddd;
  overflow: hidden;
}
.image-box img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Small images row: below main image (70 + 88.171 + 2 = 160.171mm), left 125mm
   Each thumb: 28.5 x 28.5 mm, gap 0.89 mm */
.small-images {
  position: absolute;
  left: 42.088%;             /* 125 / 297 */
  top: 76.272%;              /* 160.171 / 210 */
  display: flex;
  gap: 0.300%;               /* 0.89 / 297 (horizontal gap as % of width) */
}
.small-images img {
  width: 9.596%;             /* 28.5 / 297 */
  height: 13.571%;           /* 28.5 / 210 */
  background-color: #ccc;
  object-fit: cover;
}

/* Logo: width 40mm at (right 20mm, top 20mm) */
.logo {
  position: absolute;
  top: 9.524%;               /* 20 / 210 */
  right: 6.734%;             /* 20 / 297 */
  width: 13.468%;            /* 40 / 297 */
  height: auto;
}

/* Info box: (top 99.3mm, right 76mm [= 297-221]) */
.info-box {
  position: absolute;
  top: 47.286%;              /* 99.3 / 210 */
  right: 8%;                 /* 76 / 297 */
  font-size: clamp(8px, 1.422cqw, 22px);
  line-height: 1.8;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.info-line {
  display: flex;
  align-items: flex-start;
  border-left: 2px solid #d46a1e;
  padding-left: 6px;
}
.info-line strong { font-weight: bold; }

/* Placeholder */
.placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: #aaa;
  font-size: 24pt;
}

/* Full-page image: 257 x 170 mm at (20, 20) mm */
.main-image {
  position: absolute;
  left: 6.734%;              /* 20 / 297 */
  top: 9.524%;               /* 20 / 210 */
  width: 86.532%;            /* 257 / 297 */
  height: 80.952%;           /* 170 / 210 */
}

/* Bottom-right icon: width 40mm at (right 10mm, bottom 20mm) */
.bottom-right-image {
  position: absolute;
  width: 13.468%;            /* 40 / 297 */
  height: auto;
  right: 3.367%;             /* 10 / 297 */
  bottom: 9.524%;            /* 20 / 210 */
}

/* Order button (kept in px so it stays finger-friendly on phones) */
.orderBtn {
  position: absolute;
  bottom: 30px;
  right: 30px;
  background-color: #25d366;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  z-index: 1000;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* Modal (unchanged) */
.modal {
  display: none;
  position: fixed;
  z-index: 2000;
  inset: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
}
.modal-content {
  background-color: #fff;
  padding: 30px;
  border-radius: 10px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  position: relative;
}
.modal-content h2 { margin-top: 0; }
.modal-content input,
.modal-content textarea {
  width: 100%;
  padding: 10px;
  margin: 10px 0 20px 0;
  border: 1px solid #ccc;
  border-radius: 5px;
}
.modal-content button {
  width: 100%;
  background-color: #25d366;
  color: white;
  padding: 12px;
  border: none;
  border-radius: 5px;
  font-size: 16px;
}
.close {
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 22px;
  cursor: pointer;
}

/* =============================
   PRINT: exact millimeters
   ============================= */
@media print {
  body { padding: 0; background: #fff; }
  .page {
    width: 297mm !important;
    height: 210mm !important;
    max-width: none;
    box-shadow: none;
    margin: 0;
  }
  /* lock fonts for print if you need exact pt sizes: */
  .image-label { font-size: 14pt !important; }
  .info-box    { font-size: 12pt !important; }
}

.video-box {
  position: relative;
}
.video-box .play-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 64px;
  height: 64px;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 5;
}
.video-box .play-overlay svg {
  width: 40%;
  height: 40%;
  fill: white;
}
@media (max-width: 640px) {
  .video-box .play-overlay {
    width: 40px;
    height: 40px;
  }
}
video::-webkit-media-controls-overlay-play-button {
  display: none !important;
  -webkit-appearance: none;
}
video::-moz-media-controls {
  display: none !important;
}

/* =========================================================
   DEFAULT THEME × EDITABLE WRAPPER COMPATIBILITY
   (works when images are wrapped by <div class="editable-image">…)
   ========================================================= */

/* MAIN image box: make wrapper fill the box and image fill wrapper */
.theme-default .image-box > .editable-image { position: absolute; inset: 0; }
.theme-default .image-box > .editable-image > img {
  display: block; width: 100%; height: 100%; object-fit: cover;
}

/* SMALL thumbnails row: size wrapper like old <img> and fill with image */
.theme-default .small-images > .editable-image {
  position: relative;
  width: 16.828%;            /* same as .small-images img */
  height: 23.8%;
  background-color: #ccc;   /* keep the grey placeholder feel */
}
.theme-default .small-images > .editable-image > img {
  display: block; width: 100%; height: 100%; object-fit: cover;
}

/* PREVIEW (full-page) images: .main-image is the positioned container */
.theme-default .main-image > .editable-image { position: absolute; inset: 0; }
.theme-default .main-image > .editable-image > img.img-fit {
  display: block; width: 100%; height: 100%; object-fit: cover;
}

/* Optional cosmetic: remove grey bg when an actual img renders in .image-box */
.theme-default .image-box > .editable-image > img[src] { background: transparent; }
